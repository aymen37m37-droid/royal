# نظام إدارة المطعم المتكامل
## تطبيق ويب محلي - HTML + JavaScript + IndexedDB

---

## 📋 نظرة عامة

تطبيق ويب متكامل لإدارة المطاعم يعمل بالكامل محلياً في المتصفح دون الحاجة لاتصال إنترنت أو خوادم خارجية. تم تطويره بتقنيات الويب القياسية: HTML5, JavaScript ES6+, CSS3, وIndexedDB.

## 🎯 التقنيات المستخدمة

### Frontend
- **HTML5** - الهيكل الأساسي للواجهة
- **CSS3** - التصميم المتجاوب مع دعم Dark Mode
- **JavaScript ES6+** - المنطق والوظائف
- **IndexedDB** - قاعدة البيانات المحلية

### الخصوص
- ✅ لا يوجد اعتماديات خارجية
- ✅ عمل كامل بدون إنترنت (Offline-First)
- ✅ تخزين آمن ومحلي في المتصفح
- ✅ دعم RTL للعربية
- ✅ واجهة احترافية وسهلة الاستخدام

## 📁 هيكل المشروع

```
.
├── index.html              # الملف الرئيسي
├── styles.css              # التصميم الشامل
├── js/
│   ├── db.js              # إدارة IndexedDB
│   ├── utils.js           # وظائف مساعدة
│   ├── app.js             # التطبيق الرئيسي
│   └── modules/
│       ├── dashboard.js   # لوحة التحكم
│       ├── inventory.js   # إدارة المخزون
│       ├── employees.js   # إدارة الموظفين
│       ├── suppliers.js   # إدارة الموردين
│       ├── finance.js     # النظام المالي
│       ├── reports.js     # التقارير
│       └── settings.js    # الإعدادات
└── README.md              # التوثيق
```

## 🗄️ قاعدة البيانات (IndexedDB)

### الجداول الرئيسية:

**المخزون:**
- `inventory_items` - الأصناف مع الأسعار والكميات
- `inventory_movements` - حركة المخزون
- `stock_audits` - الجرد
- `waste_records` - الهدر

**الموظفين:**
- `employees` - بيانات الموظفين
- `attendance` - الحضور والانصراف
- `salaries` - الرواتب
- `employee_advances` - السلف
- `shifts` - المناوبات

**الموردين:**
- `suppliers` - قاعدة بيانات الموردين
- `purchase_invoices` - فواتير الشراء
- `supplier_payments` - المدفوعات

**المالية:**
- `revenues` - الإيرادات
- `expenses` - المصروفات
- `budgets` - الميزانية

**أخرى:**
- `notifications` - التنبيهات

## ✨ الوحدات الوظيفية

### 1. لوحة التحكم (Dashboard)
- إحصائيات عامة للنظام
- تنبيهات المخزون المنخفض
- المنتجات القريبة من انتهاء الصلاحية
- الإحصائيات المالية

### 2. إدارة المخزون
- إضافة/تعديل/حذف الأصناف
- تتبع الكميات والأسعار
- حساب هامش الربح تلقائياً
- تنبيهات ذكية
- بحث وفلترة متقدمة

### 3. إدارة الموظفين
- سجلات الموظفين الكاملة
- المناصب والرواتب
- حالة الموظف (نشط/غير نشط)
- بيانات الاتصال

### 4. إدارة الموردين
- قاعدة بيانات شاملة للموردين
- أنواع المنتجات المقدمة
- بيانات الاتصال
- إدارة متكاملة

### 5. النظام المالي
- تسجيل الإيرادات والمصروفات
- حساب صافي الربح تلقائياً
- إحصائيات مالية شاملة
- تحليل الأداء المالي

### 6. التقارير والإحصائيات
- تقرير المخزون الشامل
- التقارير المالية
- تقارير الموظفين
- تقارير الموردين
- إمكانية الطباعة المباشرة

### 7. الإعدادات
- تبديل الوضع الداكن/الفاتح
- النسخ الاحتياطي والاستعادة
- حذف البيانات
- معلومات النظام

## 🚀 التشغيل

### طريقة 1: استخدام Workflow (Replit)
التطبيق يعمل تلقائياً على المنفذ 5000 عبر Python HTTP Server

### طريقة 2: فتح مباشر
افتح ملف `index.html` مباشرة في أي متصفح حديث

### طريقة 3: خادم محلي
```bash
# Python
python3 -m http.server 5000

# Node.js
npx serve
```

## 💾 النسخ الاحتياطي

### التصدير:
1. اذهب للإعدادات
2. اضغط "تصدير نسخة احتياطية"
3. سيتم تنزيل ملف JSON

### الاستعادة:
1. اذهب للإعدادات
2. اضغط "استعادة نسخة احتياطية"
3. اختر ملف JSON
4. ستتم الاستعادة فوراً

## 🎨 المظهر

### الألوان
- **Primary:** Deep Blue (#1e40af)
- **Secondary:** Teal Green (#059669)
- **Accent:** Amber (#f59e0b)

### الخطوط
- Cairo
- Tajawal

### الوضع الداكن
- دعم كامل للوضع الداكن
- تبديل سهل من Header

## 📱 التوافق

### المتصفحات المدعومة:
- ✅ Chrome 87+
- ✅ Firefox 78+
- ✅ Safari 14+
- ✅ Edge 88+

### الأجهزة:
- ✅ Desktop
- ✅ Tablet
- ✅ Mobile (Responsive)

## 🔐 الأمان

- جميع البيانات محلية 100%
- لا يتم إرسال بيانات لأي خادم
- محمية بآليات أمان المتصفح
- إمكانية حذف كامل للبيانات

## ⚡ الأداء

- تحميل فوري (لا توجد تبعيات خارجية)
- استجابة سريعة
- دعم آلاف السجلات
- بحث وفلترة سريعة

## 📝 الحالة الحالية

### ✅ تم الإنجاز
- [x] قاعدة البيانات IndexedDB كاملة
- [x] جميع الوحدات الرئيسية (6 وحدات)
- [x] لوحة التحكم مع الإحصائيات
- [x] نظام التنبيهات
- [x] النسخ الاحتياطي والاستعادة
- [x] الوضع الداكن
- [x] التصميم المتجاوب
- [x] دعم RTL كامل
- [x] البيانات التجريبية
- [x] التوثيق الكامل

### 🎉 النسخة المحسنة - المزايا الجديدة

#### 1. المخزون المتقدم ✅
- **حركة المخزون**: تسجيل كامل للوارد والصادر مع الأسعار والتكاليف
- **جرد المخزون**: جرد دوري مع حساب الفروقات تلقائياً وتحديث الكميات
- **الهدر والفاقد**: تسجيل أسباب الهدر وحساب التكلفة ونسبة الهدر
- **الحسابات التلقائية**: تكلفة المخزون، قيمة المبيعات المتوقعة، هامش الربح، نسبة الهدر

#### 2. الموظفين المتقدم ✅
- **الحضور والانصراف**: تسجيل الدخول والخروج وحساب ساعات العمل والتأخير
- **الرواتب**: راتب أساسي + حوافز - خصومات - سلف = صافي الراتب
- **السلف**: تسجيل السلف ومتابعة التسديد والمتبقي
- **المناوبات**: جدولة المناوبات (صباحية/مسائية/ليلية) وحساب الساعات
- **كشف الحساب**: عرض شامل لرواتب وسلف وساعات عمل الموظف

#### 3. الموردين والمشتريات ✅
- **فواتير الشراء**: تسجيل فواتير تفصيلية مع تحديث تلقائي للمخزون
- **المدفوعات**: سندات صرف للموردين مع طرق الدفع المختلفة
- **المديونيات**: متابعة المبالغ المستحقة للموردين
- **كشف الحساب**: عرض شامل للفواتير والمدفوعات والرصيد المتبقي
- **التقييم**: تقييم أداء الموردين (1-5 نجوم)

#### 4. النظام المالي المحسن ✅
- **الإيرادات والمصروفات**: تسجيل تفصيلي مع التصنيفات
- **التحليل المالي**: صافي الربح، هامش الربح، نسبة التكاليف
- **الحسابات التلقائية**: احتساب جميع المؤشرات المالية تلقائياً

#### 5. نظام الإشعارات الذكية ✅
- **تنبيهات المخزون**: مخزون منخفض، أصناف قريبة من الانتهاء
- **تنبيهات مالية**: هامش ربح منخفض، تكلفة عمالة مرتفعة، نسبة هدر عالية
- **تنبيهات المديونيات**: مديونيات مرتفعة، سلف مستحقة
- **تنبيهات الأداء**: مراجعة شاملة عند انخفاض الربحية
- **عرض ذكي**: ترتيب حسب الأولوية (حرج/عالي/متوسط/منخفض)

#### 6. التقارير المتقدمة ✅
- تقرير المخزون الشامل مع الحركات والجرد والهدر
- تقارير الموظفين مع الحضور والرواتب والسلف
- تقارير الموردين مع الفواتير والمدفوعات
- التقارير المالية الشاملة مع التحليلات

### ✅ الحالة النهائية

**التطبيق جاهز للاستخدام الكامل!**

جميع المزايا المطلوبة تم إضافتها وتعمل بشكل صحيح:
- ✅ نظام المخزون المتقدم مع الحركات والجرد والهدر
- ✅ نظام الموظفين المتقدم مع الحضور والرواتب والسلف
- ✅ نظام الموردين مع الفواتير والمدفوعات
- ✅ نظام الإشعارات الذكية مع 8 أنواع من التنبيهات
- ✅ التقارير الشاملة والإحصائيات المتقدمة
- ✅ الحسابات المالية التلقائية

### 🚀 ميزات إضافية مقترحة (مستقبلية)
- [ ] تصدير التقارير لـ PDF
- [ ] تصدير لـ Excel/CSV
- [ ] Service Worker لـ PWA
- [ ] إشعارات المتصفح
- [ ] نظام فواتير متقدم
- [ ] رسوم بيانية تفاعلية
- [ ] دعم عدة عملات
- [ ] طباعة حرارية

## 🛠️ التطوير

### البنية المعمارية
- **Modular Design**: كل وحدة في ملف منفصل
- **Event-Driven**: استخدام events للتفاعل
- **Async/Await**: للعمليات غير المتزامنة
- **Error Handling**: معالجة شاملة للأخطاء

### الوظائف الأساسية

**db.js:**
- إدارة قاعدة البيانات IndexedDB
- CRUD operations كاملة
- Import/Export للبيانات

**utils.js:**
- وظائف مساعدة (تنسيق، تحويل، تصدير)
- Modals وDialogs
- Validation

**app.js:**
- تهيئة التطبيق
- إدارة Navigation
- Theme Management
- Notifications

## 📖 دليل الاستخدام

### للمطورين
1. افتح المشروع في محرر الأكواد
2. استكشف هيكل المشروع
3. اقرأ التعليقات في الكود
4. عدّل حسب احتياجاتك

### للمستخدمين
1. افتح التطبيق في المتصفح
2. استخدم القائمة الجانبية للتنقل
3. أضف بياناتك
4. احفظ نسخة احتياطية بانتظام

## 🎓 التعلم من المشروع

هذا المشروع مثال عملي على:
- بناء تطبيقات Offline-First
- استخدام IndexedDB
- تصميم RTL للعربية
- إدارة الحالة بدون مكتبات
- Clean Code وModular Architecture

---

**المشروع جاهز للاستخدام! 🎉**
